{"version":3,"sources":["layouts/Logout.js"],"names":["App","webSocket","location","useLocation","auth","useAuth","history","useHistory","useEffect","setTimeout","send","JSON","stringify","type","onmessage","e","data","parse","console","log","status","handleLogout","state","from","pathname","signout","push","localStorage","clear","LinearBuffer","classes","makeStyles","root","position","top","left","backgroundColor","height","width","display","justifyContent","alignItems","zIndex","useStyles","className","disableShrink"],"mappings":"yGAAA,0GAsBe,SAASA,EAAT,GAA2B,IAAbC,EAAY,EAAZA,UACnBC,EAAWC,cACXC,EAAOC,cACPC,EAAUC,cAEhBC,qBAAU,WACNC,YAAW,WACPR,EAAUS,KAAKC,KAAKC,UAAU,CAC1BC,KAAM,cAET,KAEHZ,EAAUa,UAAY,SAACC,GACrB,IAAMC,EAAOL,KAAKM,MAAMF,EAAEC,MAC1BE,QAAQC,IAAI,gBACZD,QAAQC,IAAIH,GACK,WAAdA,EAAKH,OACJK,QAAQC,IAAIH,EAAKI,QAEA,YAAdJ,EAAKI,QACNF,QAAQC,IAAI,iCACZE,KAGAH,QAAQC,IAAI,8CAKvB,IAEH,IAAME,EAAe,WACjBH,QAAQC,IAAI,iBACGjB,EAASoB,OAAS,CAAEC,KAAM,CAAEC,SAAU,gBAA/CD,KACNnB,EAAKqB,SAAQ,WACThB,YAAW,WACPH,EAAQoB,KAAK,YACd,KAEHC,aAAaC,MAAM,UACnBD,aAAaC,MAAM,cAK3B,OAFAV,QAAQC,IAAIlB,GAEL,kBAAC4B,EAAD,MAGX,SAASA,IACL,IAeMC,EAfYC,YAAW,CAC7BC,KAAM,CACJC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,gBAAiB,QACjBC,OAAQ,QACRC,MAAO,QACPC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,KAIMC,GAChB,OACE,yBAAKC,UAAWd,EAAQE,MACtB,kBAAC,IAAD,CAAkBa,eAAa","file":"static/js/23.113a2e66.chunk.js","sourcesContent":["import React, { useState , useEffect, Suspense,  useContext, createContext} from \"react\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  Redirect,\r\n  useHistory,\r\n  useLocation\r\n} from \"react-router-dom\";\r\n\r\n// pages for this product\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport \"assets/css/material-dashboard-react.css?v=1.9.0\";\r\nimport { useCallback } from \"react\";\r\n\r\nimport {useAuth} from '../App'\r\n\r\nexport default function App({webSocket}) {\r\n    const location = useLocation();\r\n    const auth = useAuth()\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            webSocket.send(JSON.stringify({\r\n                type: 'logout'\r\n            }))\r\n          }, 100);\r\n        \r\n          webSocket.onmessage = (e)=>{\r\n            const data = JSON.parse(e.data);\r\n            console.log(\"handleLogout\")\r\n            console.log(data)\r\n            if(data.type === \"logout\"){\r\n                console.log(data.status)\r\n          \r\n                if(data.status===\"success\"){\r\n                  console.log('vous deconnecter cote serveur')\r\n                  handleLogout()\r\n                }\r\n                else{\r\n                  console.log(\"erreur de deconnection cotÃ© serveur\")\r\n                }\r\n              }\r\n        }\r\n\r\n    }, [])\r\n\r\n    const handleLogout = ()=>{\r\n        console.log(\"handleLogout\")\r\n        let { from } = location.state || { from: { pathname: \"/lax_medic\" } };\r\n        auth.signout(() => {\r\n            setTimeout(() => {\r\n                history.push(\"/login\")\r\n            }, 100);\r\n          \r\n            localStorage.clear('azerty')\r\n            localStorage.clear('querty')\r\n        });\r\n      }\r\n    console.log(webSocket)\r\n\r\n    return <LinearBuffer/>\r\n}\r\n\r\nfunction LinearBuffer() {\r\n    const useStyles = makeStyles({\r\n    root: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      backgroundColor: '#fff9',\r\n      height: '100vh',\r\n      width: '100vw',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      zIndex: 99\r\n    },\r\n  });\r\n    \r\n    const classes = useStyles();\r\n    return (\r\n      <div className={classes.root}>\r\n        <CircularProgress disableShrink/>\r\n      </div>\r\n    );\r\n  }\r\n"],"sourceRoot":""}