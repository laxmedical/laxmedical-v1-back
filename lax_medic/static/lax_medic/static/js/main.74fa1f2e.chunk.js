(this.webpackJsonplax_medic=this.webpackJsonplax_medic||[]).push([[7],{39:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return v}));var a=n(32),o=n(11),l=n(0),c=n.n(l),r=n(5),u=n(35),i=n(2),s=n(46),m=n(48),f=(n(40),c.a.lazy((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(10),n.e(22)]).then(n.bind(null,70))}))),g=c.a.lazy((function(){return Promise.all([n.e(2),n.e(12),n.e(13)]).then(n.bind(null,69))}));Object(r.a)();function d(e){var t=e.webSocket;return c.a.createElement("div",null,c.a.createElement(E,null,c.a.createElement(u.a,null,c.a.createElement(l.Suspense,{fallback:c.a.createElement(b,null)},c.a.createElement("div",null,c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/public"},c.a.createElement(S,null)),c.a.createElement(i.b,{path:"/login"},c.a.createElement(f,{webSocket:t})),c.a.createElement(w,{path:"/lax_medic",webSocket:t,Component:g}),c.a.createElement(i.a,{from:"/",to:"lax_medic"})))))))}function b(){var e=Object(s.a)({root:{position:"fixed",height:"100vh",width:"100vw",display:"flex",justifyContent:"center",backgroundColor:"white",alignItems:"center"}})();return c.a.createElement("div",{className:e.root},c.a.createElement(m.a,null))}var p={isAuthenticated:!1,signin:function(e){p.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){p.isAuthenticated=!1,setTimeout(e,100)}},h=Object(l.createContext)();function E(e){var t=e.children,n=function(){var e=Object(l.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return{user:n,signin:function(e){return p.signin((function(){a(e())}))},signout:function(e){return p.signout((function(){a(null),e()}))}}}();return c.a.createElement(h.Provider,{value:n},t)}function v(){return Object(l.useContext)(h)}function w(e){var t=e.webSocket,n=e.Component,r=Object(a.a)(e,["webSocket","Component"]),u=Object(l.useState)(!0),s=Object(o.a)(u,2),m=s[0],f=s[1];console.log("private");var g=Object(i.g)(),d=Object(i.h)(),p=v();Object(l.useEffect)((function(){p.user?f(null):(setTimeout((function(){t.send(JSON.stringify({type:"init"}))}),1e3),t.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),"init"===n.type&&(console.log(n.content),n.content.is_auth?(console.log("welcome"),E(n.content.user)):localStorage.getItem("azerty")&&localStorage.getItem("querty")?(console.log("tu etais sauvegarder en local"),t.send(JSON.stringify({type:"login",content:{username:localStorage.getItem("azerty"),password:localStorage.getItem("querty")}}))):(console.log("vous are not connect"),g.push("/login"))),"login"===n.type&&(console.log(n.content),"success"===n.status?(console.log("welcome"),E(n.content.user)):(console.log("vous are not connect"),localStorage.clear("azerty"),localStorage.clear("querty"),g.push("/login")))})}),[]);var h=(d.state||{from:{pathname:"/"}}).from,E=function(e){p.signin((function(){return g.replace(h),e}))};return c.a.createElement(i.b,r,m?c.a.createElement("div",null,c.a.createElement(b,null)):p.user?c.a.createElement(n,{webSocket:t}):c.a.createElement(i.a,{to:{pathname:"/login",state:{from:d}}}))}function S(){return c.a.createElement("h3",null,"Public")}},40:function(e,t,n){},54:function(e,t,n){e.exports=n(55)},55:function(e,t,n){"use strict";n.r(t);var a=n(11),o=n(0),l=n.n(o),c=n(34),r=n.n(c),u=n(46),i=n(48),s=n(39),m=(n(40),new WebSocket("ws://"+window.location.hostname+":8000/ws/lax_medic/personal/")),f=function(){var e=l.a.useState(null),t=Object(a.a)(e,2),n=t[0],o=t[1];return l.a.useEffect((function(){m.onopen=function(){return o(m)},m.onclose=function(){return o(null)}}),[]),l.a.createElement(l.a.Fragment,null,n?l.a.createElement(s.a,{webSocket:n}):l.a.createElement(g,null))};function g(){var e=Object(u.a)({root:{position:"fixed",height:"100vh",width:"100vw",display:"flex",justifyContent:"center",backgroundColor:"white",alignItems:"center"}})();return l.a.createElement("div",{className:e.root},l.a.createElement(i.a,{disableShrink:!0}))}r.a.render(l.a.createElement(f,null),document.getElementById("root"))}},[[54,8,9]]]);
//# sourceMappingURL=main.74fa1f2e.chunk.js.map