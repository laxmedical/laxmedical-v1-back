(this.webpackJsonplax_medic=this.webpackJsonplax_medic||[]).push([[4],{43:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return j}));var a=n(39),o=n(11),c=n(0),l=n.n(c),r=n(6),i=n(40),u=n(2),s=n(36),m=n(19),f=n(18),d=n(35),g=n(78),b=n(80),p=n(60),h=(n(46),l.a.lazy((function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(20)]).then(n.bind(null,88))}))),E=l.a.lazy((function(){return Promise.all([n.e(2),n.e(8),n.e(13)]).then(n.bind(null,87))}));Object(r.a)();function v(e){var t=e.webSocket,n=l.a.useState(JSON.parse(localStorage.getItem("darkMode"))||!1),a=Object(o.a)(n,2),r=a[0],s=(a[1],l.a.useMemo((function(){return Object(d.a)({palette:{type:r?"dark":"light",primary:m.a,secondary:f.a}})}),[r]));return l.a.useEffect((function(){localStorage.setItem("darkMode",JSON.stringify(r))}),[r]),l.a.createElement("div",null,l.a.createElement(O,null,l.a.createElement(g.a,{theme:s},l.a.createElement(b.a,null),l.a.createElement(i.a,null,l.a.createElement(c.Suspense,{fallback:l.a.createElement(S,null)},l.a.createElement("div",null,l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/public"},l.a.createElement(x,null)),l.a.createElement(u.b,{path:"/login"},l.a.createElement(h,{webSocket:t})),l.a.createElement(k,{path:"/lax_medic",webSocket:t,Component:E}),l.a.createElement(u.a,{from:"/",to:"lax_medic"}))))))))}function S(){var e=Object(s.a)({root:{position:"fixed",height:"100vh",width:"100vw",display:"flex",justifyContent:"center",backgroundColor:"white",alignItems:"center"}})();return l.a.createElement("div",{className:e.root},l.a.createElement(p.a,null))}var w={isAuthenticated:!1,signin:function(e){w.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){w.isAuthenticated=!1,setTimeout(e,100)}},y=Object(c.createContext)();function O(e){var t=e.children,n=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return{user:n,signin:function(e){return w.signin((function(){a(e())}))},signout:function(e){return w.signout((function(){a(null),e()}))}}}();return l.a.createElement(y.Provider,{value:n},t)}function j(){return Object(c.useContext)(y)}function k(e){var t=e.webSocket,n=e.Component,r=Object(a.a)(e,["webSocket","Component"]),i=Object(c.useState)(!0),s=Object(o.a)(i,2),m=s[0],f=s[1];console.log("private");var d=Object(u.g)(),g=Object(u.h)(),b=j();Object(c.useEffect)((function(){b.user?f(null):(setTimeout((function(){t.send(JSON.stringify({type:"init"}))}),500),t.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),"init"===n.type&&(console.log(n.content),n.content.is_auth?(console.log("welcome"),h(n.content.user)):localStorage.getItem("azerty")&&localStorage.getItem("querty")?(console.log("tu etais sauvegarder en local"),t.send(JSON.stringify({type:"login",content:{username:localStorage.getItem("azerty"),password:localStorage.getItem("querty")}}))):(console.log("vous are not connect"),d.push("/login"))),"login"===n.type&&(console.log(n.content),"success"===n.status?(console.log("welcome"),h(n.content.user)):(console.log("vous are not connect"),localStorage.clear("azerty"),localStorage.clear("querty"),d.push("/login")))})}),[]);var p=(g.state||{from:{pathname:"/"}}).from,h=function(e){b.signin((function(){return d.replace(p),e}))};return l.a.createElement(u.b,r,m?l.a.createElement("div",null,l.a.createElement(S,null)):b.user?l.a.createElement(n,{webSocket:t}):l.a.createElement(u.a,{to:{pathname:"/login",state:{from:g}}}))}function x(){return l.a.createElement("h3",null,"Public")}},46:function(e,t,n){},66:function(e,t,n){e.exports=n(67)},67:function(e,t,n){"use strict";n.r(t);var a=n(11),o=n(0),c=n.n(o),l=n(41),r=n.n(l),i=n(36),u=n(60),s=n(58),m=n.n(s),f=n(43),d=(n(46),new WebSocket("ws://"+window.location.hostname+":8000/ws/lax_medic/personal/")),g=function(){var e=c.a.useState(null),t=Object(a.a)(e,2),n=t[0],o=t[1],l=c.a.useState(""),r=Object(a.a)(l,2),i=r[0],u=r[1];return c.a.useEffect((function(){d.onopen=function(){return o(d)},d.onclose=function(){o(null),u("disconnect")}}),[]),c.a.createElement(c.a.Fragment,null,n?c.a.createElement(f.a,{webSocket:n}):"disconnect"===i?c.a.createElement(p,null):c.a.createElement(b,null))};function b(){var e=Object(i.a)({root:{position:"fixed",height:"100vh",width:"100vw",display:"flex",justifyContent:"center",backgroundColor:"white",alignItems:"center"}})();return c.a.createElement("div",{className:e.root},c.a.createElement(u.a,{disableShrink:!0}))}function p(){var e=Object(i.a)({root:{position:"fixed",height:"100vh",width:"100vw",display:"flex",justifyContent:"center",flexDirection:"column",backgroundColor:"white",alignItems:"center"}})();return c.a.createElement("div",{className:e.root},c.a.createElement(m.a,{style:{fontSize:150}}),c.a.createElement("p",null,"Vous \xe9tes deconnect\xe9 du serveur"))}r.a.render(c.a.createElement(g,null),document.getElementById("root"))}},[[66,5,6]]]);
//# sourceMappingURL=main.9f0041e3.chunk.js.map